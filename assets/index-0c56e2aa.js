import{T as m}from"./index-d504ef27.js";import{x as p,c as S,t as u,d as r,e as g,n as b}from"./vendor-fa06579b.js";const O=`.dui-input-text{position:relative;margin-left:auto;margin-right:auto;display:flex;width:100%;padding-top:1.25rem;padding-bottom:1.25rem}.dui-input-text input[type]{font-family:var(--fontFamily);position:relative;display:inline-flex;height:2rem;width:100%;border-radius:.375rem;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.25rem .75rem;font-size:.875rem;line-height:1.25rem}@media (min-width: 640px){.dui-input-text input[type]{padding:1.5rem;font-size:1rem;line-height:1.5rem}}.dui-input-text input[type]{border:1px solid #ccc}.dui-input-text[disabled]{opacity:.6}.dui-input-text.dense,.dui-input-text.sm{padding-top:0;padding-bottom:0}.dui-input-text.sm input[type]{height:1.25rem;padding-top:1rem;padding-bottom:1rem;font-size:.875rem;line-height:1.25rem}@media (min-width: 640px){.dui-input-text.sm input[type]{height:1.5rem}}.dui-input-text.sm .dui-input-right,.dui-input-text.sm .dui-input-left{padding-top:1rem;padding-bottom:1rem;line-height:1rem}.dui-input-text .dui-input-msg,.dui-input-text .dui-input-tip,.dui-input-text label{line-height:1!important}.dui-input-text .dui-input-msg,.dui-input-text .dui-input-tip,.dui-input-text label{position:absolute;display:flex;height:1rem;flex-wrap:wrap;align-items:center;padding-left:.75rem;padding-right:.75rem;font-size:.875rem;line-height:1.25rem;margin-left:1px;top:.15rem}.dui-input-text .dui-input-msg{top:auto;bottom:.15rem}.dui-input-text .dui-input-tip{left:auto;right:0px}.dui-input-text .dui-input-right,.dui-input-text .dui-input-left{pointer-events:none;position:absolute;display:flex;height:1.25rem;align-items:center;justify-content:center;border-top-right-radius:.375rem;border-bottom-right-radius:.375rem;padding:1.25rem .25rem 1.25rem .5rem}@media (min-width: 640px){.dui-input-text .dui-input-right,.dui-input-text .dui-input-left{height:1.5rem;padding:1.5rem .5rem 1.5rem 1.5rem}}.dui-input-text .dui-input-right,.dui-input-text .dui-input-left{min-width:1.5rem;z-index:1;right:1px;margin-top:1px;font-size:1em;line-height:1em}.dui-input-text .dui-input-right:empty,.dui-input-text .dui-input-left:empty{--tw-bg-opacity: 1;background-color:#000;background-color:rgba(0,0,0,var(--tw-bg-opacity))}.dui-input-text .dui-input-right>*,.dui-input-text .dui-input-left>*{pointer-events:auto}.dui-input-text .dui-input-left{right:auto;left:1px}.dui-input-text[required] label:after{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;font-weight:600;line-height:1;--tw-text-opacity: 1;color:#ef4444;color:rgba(239,68,68,var(--tw-text-opacity));content:"*";height:1em;margin-left:.25em}.dui-input-text[rightSlotted] input[type]{padding-right:5rem}.dui-input-text.sm[rightSlotted] input[type]{padding-right:2.5rem}.dui-input-text[leftSlotted] input[type]{padding-left:2.75rem}.dui-input-text.sm[leftSlotted] input[type]{padding-left:2rem}
`;var k=Object.defineProperty,P=Object.getOwnPropertyDescriptor,a=(t,e,n,s)=>{for(var i=s>1?void 0:s?P(e,n):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(i=(s?l(e,n,i):l(i))||i);return s&&i&&k(e,n,i),i};const _=(t,e,{lower:n=!1,upper:s=!1}={})=>(t&&(t=t==null?void 0:t.trim(),n?t=t.toLowerCase():s&&(t=t.toUpperCase())),t);let d=class extends m(O){constructor(){super(...arguments),this.placeholder="",this.class="",this.sm=!1,this.dense=!1,this.disabled=!1,this.autoforce=!1,this.required=!1,this.lower=!1,this.upper=!1,this.err=!1,this.value="",this.debounce=300,this.rightSlotted=!1,this.leftSlotted=!1,this.type="text",this.onKeyup=t=>{t.key==="Enter"&&(this.emit("submit",this.value),setTimeout(()=>this.updateVal()))}}onSlotChange(t){const e=t.target;if(!e)return;e.assignedNodes({flatten:!0}).length}onSlotRight(t){this.rightSlotted=!!t.target}onSlotLeft(t){this.leftSlotted=!!t.target}firstUpdated(){if(this.autoforce){const t=this.$("input");t.focus(),t.select()}}onFocus(t){t.target.select()}updateVal(){const t=this.$("input");t&&(t.value=this.value)}onInput(t){t.stopImmediatePropagation();let e=t.target.value;this.value=_(e,null,{lower:this.lower,upper:this.upper})||"",this.updateVal(),this.emit("input",e)}render(){return p`<div class="dui-input-text ${S(this.$c([this.class,{sm:this.sm,dense:this.dense}]))}" ?required="${this.required}" ?rightSlotted="${this.rightSlotted}" ?leftSlotted="${this.leftSlotted}" part="dui-input-text"><label><slot name="label" @slotchange="${this.onSlotChange}"></slot></label> <span class="dui-input-left"><slot name="left" @slotchange="${this.onSlotLeft}"></slot></span><input .type="${this.type}" .disabled="${this.disabled}" placeholder="${this.placeholder}" value="${this.value}" title="${this.title}" @focus="${this.onFocus}" @input="${this.onInput}" @keyup="${this.onKeyup}"><div class="dui-input-right"><slot name="right" @slotchange="${this.onSlotRight}"></slot></div><div class="dui-input-msg"><slot name="msg" @slotchange="${this.onSlotChange}"></slot></div><div class="dui-input-tip"><slot name="tip" @slotchange="${this.onSlotChange}"></slot></div></div>`}};a([r({type:String})],d.prototype,"placeholder",2);a([r({type:String})],d.prototype,"class",2);a([r({type:Boolean})],d.prototype,"sm",2);a([r({type:Boolean})],d.prototype,"dense",2);a([r({type:Boolean})],d.prototype,"disabled",2);a([r({type:Boolean})],d.prototype,"autoforce",2);a([r({type:Boolean})],d.prototype,"required",2);a([r({type:Boolean})],d.prototype,"lower",2);a([r({type:Boolean})],d.prototype,"upper",2);a([r({type:Boolean})],d.prototype,"err",2);a([r({type:String,converter:_})],d.prototype,"value",2);a([r({type:Number})],d.prototype,"debounce",2);a([u()],d.prototype,"rightSlotted",2);a([u()],d.prototype,"leftSlotted",2);a([u()],d.prototype,"type",2);d=a([g("dui-input-text")],d);const j="";var B=Object.defineProperty,I=Object.getOwnPropertyDescriptor,h=(t,e,n,s)=>{for(var i=s>1?void 0:s?I(e,n):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(i=(s?l(e,n,i):l(i))||i);return s&&i&&B(e,n,i),i};let c=class extends m(j){constructor(){super(...arguments),this.placeholder="Search names or addresses",this.entire=!1,this.keyword="",this.err="",this.pending=!1,this.onInput=async t=>{this.keyword=t.detail}}doSearch(){this.err||this.emit("search",this.keyword)}async connectedCallback(){super.connectedCallback(),typeof this.default>"u"}render(){return p`<dui-input-text @input="${this.onInput}" @submit="${this.doSearch}" value="${this.keyword}" placeholder="${this.placeholder}" ?disabled="${this.pending}"><span slot="label"><slot name="label"></slot></span><span slot="right" class="-mr-1"><dui-button @click="${this.doSearch}" icon sm class="text-blue-500"><i class="mdi mdi-magnify text-lg"></i></dui-button></span><span slot="msg">${b(this.err,()=>p`<span class="text-red-500">${this.err}</span>`,()=>p`<slot name="msg"></slot>`)}</span></dui-input-text>`}};h([r()],c.prototype,"placeholder",2);h([r()],c.prototype,"default",2);h([r({type:Boolean})],c.prototype,"entire",2);h([u()],c.prototype,"keyword",2);h([u()],c.prototype,"err",2);h([u()],c.prototype,"pending",2);c=h([g("dui-ns-search")],c);const D="/assets/doid-15c8a698.svg";var L=Object.defineProperty,z=Object.getOwnPropertyDescriptor,f=(t,e,n,s)=>{for(var i=s>1?void 0:s?z(e,n):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(i=(s?l(e,n,i):l(i))||i);return s&&i&&L(e,n,i),i};let y=class extends m(""){constructor(){super(...arguments),this.icon="",this.sm=!1,this.dense=!1}render(){return p`<strong href="/" class="block m-12 mx-auto ${S(this.$c([this.sm?"w-14 h-14 ":"w-24 h-24"]))}"><img class="w-full h-full object-contain select-none pointer-events-none" src="${this.icon||D}"></strong><div class="my-8 text-center"><strong class="block"><slot name="h1"></slot></strong><slot name="msg"></slot></div>`}};f([r()],y.prototype,"icon",2);f([r({type:Boolean})],y.prototype,"sm",2);f([r({type:Boolean})],y.prototype,"dense",2);y=f([g("doid-symbol")],y);let $=class extends m(""){constructor(){super(...arguments),this.sm=!1}render(){return p`<img class="w-full h-full object-contain select-none pointer-events-none ${S({"w-2/3 h-2/3":this.sm})}" src="${D}">`}};f([r({type:Boolean})],$.prototype,"sm",2);$=f([g("doid-icon")],$);var E=Object.defineProperty,H=Object.getOwnPropertyDescriptor,C=(t,e,n,s)=>{for(var i=s>1?void 0:s?H(e,n):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(i=(s?l(e,n,i):l(i))||i);return s&&i&&E(e,n,i),i};let w=class extends m(""){constructor(){super(...arguments),this.type="inline"}render(){switch(this.type){case"block":return p`<div class="block mx-auto my-8 text-center text-xl"><i class="mdi mdi-loading mx-1"></i></div>`;default:return p`<i class="mdi mdi-loading mr-1"></i> Loading...`}}};C([r({type:String})],w.prototype,"type",2);w=C([g("loading-icon")],w);const N="";var q=Object.defineProperty,T=Object.getOwnPropertyDescriptor,v=(t,e,n,s)=>{for(var i=s>1?void 0:s?T(e,n):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(i=(s?l(e,n,i):l(i))||i);return s&&i&&q(e,n,i),i};let x=class extends m(N){constructor(){super(...arguments),this.blockData=[],this.pending=!1,this.isConnect=!1,this.goto=t=>{}}runWs(){const t=this;t.pending=!0,this.isConnect=!1,this.blockData=[];const e=new WebSocket("ws://54.91.9.8:8557");e.addEventListener("open",function(n){e.send('{"jsonrpc":"2.0","id":1,"method":"doid_currentBlock","params":[]}'),e.send('{"jsonrpc": "2.0", "method": "doid_subscribe", "params": ["newHeads"], "id": 2}')}),e.addEventListener("message",function(n){const s=JSON.parse(n.data);if(t.getData(s),s.id===1){const i=s.result.header.height;for(let o=i-1;o>i-30;o--)e.send(`{"jsonrpc":"2.0","id":3,"method":"doid_getBlockByHeight","params":[${o}]}`)}t.pending=!1,t.isConnect=!0}),e.addEventListener("close",function(n){t.runWs(),t.isConnect=!1}),e.addEventListener("error",function(n){t.runWs(),t.isConnect=!1})}reloadSocket(){location.reload()}getData(t){t.result&&t.result.header&&this.blockData.unshift(t.result.header),t.method==="doid_subscription"&&this.blockData.unshift(t.params.result.header),this.blockData=this.blockData.slice(0,30).sort((e,n)=>n.height-e.height)}connectedCallback(){super.connectedCallback(),this.runWs()}render(){return p`<div class="home">
      <!-- <p class="my-4 text-center">
        If you have locked a name with lockpass before, click&nbsp;<dui-link href="https://lockpass.doid.tech/passes"
          >here</dui-link
        >&nbsp;to redeem your DOID.
      </p> -->
      <div class="dui-container">
        <!-- <doid-symbol>
          <span slot="h1">Your Decentralized OpenID</span>
          <p slot="msg" class="my-2">Safer, faster and easier entrance to chains, contacts and dApps</p>
        </doid-symbol> -->
        <div class="mx-auto">
          <!-- <dui-ns-search @search=${this.goto} placeholder="Search Explorer"></dui-ns-search> -->
        </div>
        <div class="mt-2 flex justify-between items-center">
          <div class="text-3xl">Latest Blocks</div>
          <div>
            ${b(this.isConnect,()=>p`<div class="text-green-600">
                    <i class="mdi mdi-lan-connect mx-1"></i>Connected</div>`,()=>p`
             <div class="text-red-600 inline-block"><i class="mdi mdi-lan-disconnect mx-1"></i>Disconnected</div>
             <i class="mdi mdi-reload mx-1 text-green-600 cursor-pointer" @click="${this.reloadSocket}"></i>
          `)}

          </div>
        </div>
        <div class="mt-2 blocks-table">
          <div class="flex block-header uppercase py-2 border-y">
            <div class="flex-none w-20 p-2">BLOCK</div>
            <div class="flex-1 p-2 ">timestamp</div>
            <div class="flex-1 p-2">HASH</div>
            <div class="flex-1 p-2 text-right">miner</div>
            <div class="flex-1 p-2 text-right">transactionsRoot</div>
          </div>
          ${b(!this.pending,()=>p`
            ${this.blockData.map((t,e)=>p`<div class="flex bg-gray-100 rounded-lg mt-2 cursor-pointer  py-2 hover_bg-gray-300">
              <div class="flex-none w-20 p-2 text-blue-500 underline">${t.height}</div>
              <div class="flex-1 p-2 truncate">${new Date(t.timestamp*1e3).toUTCString()}</div>
              <div class="flex-1 p-2 truncate">${t.parentHash}</div>
              <div class="flex-1 p-2 text-right truncate">${t.miner}</div>
              <div class="flex-1 p-2 text-right truncate">${t.transactionsRoot}</div>
            </div>`)}
          `,()=>p`
          <div class="text-center p-3 border-t-2">
          <loading-icon type="inline-block"></loading-icon>
          </div>
          `)}
        </div>
      </div>
    </div>`}};v([u()],x.prototype,"blockData",2);v([u()],x.prototype,"pending",2);v([u()],x.prototype,"isConnect",2);x=v([g("view-home")],x);export{x as ViewHome};
